<h2>Админ-панель: Справочник НПА</h2>

<!-- Форма создания -->
<form [formGroup]="actForm" (ngSubmit)="onSubmit()" class="admin-form">
  <fieldset class="vertical-form">
    <legend>Добавить новый НПА</legend>
    <div class="form-field">
      <label for="referenceCode">Код (напр. "ФЗ-7" или "КоАП 8.21")</label>
      <input id="referenceCode" type="text" formControlName="referenceCode" />
    </div>
    <div class="form-field">
      <label for="title">Полное название</label>
      <input id="title" type="text" formControlName="title" />
    </div>
    <div class="form-field">
      <label for="description">Описание (опционально)</label>
      <input id="description" type="text" formControlName="description" />
    </div>
    <div class="form-field">
      <label for="externalLink">Внешняя ссылка (опционально)</label>
      <input id="externalLink" type="text" formControlName="externalLink" placeholder="https://..." />
    </div>
    <button type="submit" [disabled]="actForm.invalid">Сохранить</button>
  </fieldset>
</form>

@if (error()) {
<div class="error-message">
  {{ error() }}
</div>
}

<!-- Список НПА -->
<h3>Список существующих НПА</h3>

@if (isLoading()) {
<p>Загрузка НПА...</p>
}

<div class="table-container">
  <table class="admin-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Код</th>
        <th>Название</th>
        <th>Ссылка</th>
        <th>Действия</th>
      </tr>
    </thead>
    <tbody>
      @for (act of legalActs(); track act.id) {
      <tr>
        <td>{{ act.id }}</td>
        <td>
          <strong>{{ act.referenceCode }}</strong>
        </td>
        <td>{{ act.title | slice: 0:100 }}...</td>
        <td>
          @if(act.externalLink) {
          <a [href]="act.externalLink" target="_blank">Ссылка</a>
          }
        </td>
        <td class="actions">
          <button class="action-btn edit">Редакт.</button>
          <button class="action-btn delete" (click)="onDelete(act)">
            Удалить
          </button>
        </td>
      </tr>
      } @empty {
      <tr>
        <td colspan="5">Справочник НПА пуст.</td>
      </tr>
      }
    </tbody>
  </table>
</div>
